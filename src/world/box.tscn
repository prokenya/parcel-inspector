[gd_scene load_steps=13 format=3 uid="uid://ct88thi23iqv6"]

[ext_resource type="Script" uid="uid://dpa0g5owqhboa" path="res://src/world/box.gd" id="1_cwdg0"]
[ext_resource type="Texture2D" uid="uid://bd6fjfrt2m63y" path="res://assets/prototype/Dark/texture_01.png" id="2_642he"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_cwdg0"]
rough = true

[sub_resource type="Animation" id="Animation_642he"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("head:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, -3.14159)]
}

[sub_resource type="Animation" id="Animation_cwdg0"]
resource_name = "open"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("head:rotation")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.0333333, 0.966667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0, 0, -3.14159), Vector3(0, 0, -0.261799)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_642he"]
_data = {
&"RESET": SubResource("Animation_642he"),
&"open": SubResource("Animation_cwdg0")
}

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_x4rov"]
albedo_texture = ExtResource("2_642he")
uv1_scale = Vector3(15, 15, 15)

[sub_resource type="BoxMesh" id="BoxMesh_gh0ne"]
size = Vector3(1, 0.015, 1)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_cwdg0"]
data = PackedVector3Array(-0.5, 0.0075, 0.5, 0.5, 0.0075, 0.5, -0.5, -0.0075, 0.5, 0.5, 0.0075, 0.5, 0.5, -0.0075, 0.5, -0.5, -0.0075, 0.5, 0.5, 0.0075, -0.5, -0.5, 0.0075, -0.5, 0.5, -0.0075, -0.5, -0.5, 0.0075, -0.5, -0.5, -0.0075, -0.5, 0.5, -0.0075, -0.5, 0.5, 0.0075, 0.5, 0.5, 0.0075, -0.5, 0.5, -0.0075, 0.5, 0.5, 0.0075, -0.5, 0.5, -0.0075, -0.5, 0.5, -0.0075, 0.5, -0.5, 0.0075, -0.5, -0.5, 0.0075, 0.5, -0.5, -0.0075, -0.5, -0.5, 0.0075, 0.5, -0.5, -0.0075, 0.5, -0.5, -0.0075, -0.5, 0.5, 0.0075, 0.5, -0.5, 0.0075, 0.5, 0.5, 0.0075, -0.5, -0.5, 0.0075, 0.5, -0.5, 0.0075, -0.5, 0.5, 0.0075, -0.5, -0.5, -0.0075, 0.5, 0.5, -0.0075, 0.5, -0.5, -0.0075, -0.5, 0.5, -0.0075, 0.5, 0.5, -0.0075, -0.5, -0.5, -0.0075, -0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_cwdg0"]
size = Vector3(1, 0.1, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_j3hw6"]
albedo_texture = ExtResource("2_642he")
uv1_scale = Vector3(15, 15, 15)

[sub_resource type="BoxShape3D" id="BoxShape3D_642he"]

[node name="RigidBody3D" type="RigidBody3D"]
physics_material_override = SubResource("PhysicsMaterial_cwdg0")
can_sleep = false
freeze = true
script = ExtResource("1_cwdg0")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_642he")
}

[node name="head" type="Node3D" parent="."]
transform = Transform3D(-1, 2.53518e-06, 0, -2.53518e-06, -1, 0, 0, 0, 1, -0.509869, 0.532088, 0)

[node name="MeshInstance3D6" type="MeshInstance3D" parent="head"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 0.00711918, 0)
material_override = SubResource("StandardMaterial3D_x4rov")
mesh = SubResource("BoxMesh_gh0ne")
skeleton = NodePath("../..")

[node name="Body3D" type="StaticBody3D" parent="head"]
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="head/Body3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.5, 0.00711918, 0)
shape = SubResource("ConcavePolygonShape3D_cwdg0")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.459808, 0)
shape = SubResource("BoxShape3D_cwdg0")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0.046398, 0.432232)
shape = SubResource("BoxShape3D_cwdg0")

[node name="CollisionShape3D3" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0.046398, -0.453682)
shape = SubResource("BoxShape3D_cwdg0")

[node name="CollisionShape3D4" type="CollisionShape3D" parent="."]
transform = Transform3D(-4.37114e-08, 1, 4.37114e-08, 0, -4.37114e-08, 1, 1, 4.37114e-08, 1.91069e-15, -0.442957, 0.046398, -0.0107247)
shape = SubResource("BoxShape3D_cwdg0")

[node name="CollisionShape3D5" type="CollisionShape3D" parent="."]
transform = Transform3D(-4.37114e-08, 1, 4.37114e-08, 0, -4.37114e-08, 1, 1, 4.37114e-08, 1.91069e-15, 0.442957, 0.046398, -0.0107247)
shape = SubResource("BoxShape3D_cwdg0")

[node name="mesh" type="Node3D" parent="."]
metadata/_edit_group_ = true

[node name="MeshInstance3D" type="MeshInstance3D" parent="mesh"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.492881, 0)
material_override = SubResource("StandardMaterial3D_j3hw6")
mesh = SubResource("BoxMesh_gh0ne")
skeleton = NodePath("../..")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="mesh"]
transform = Transform3D(-4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0, 1, -0.486987, 0.0169232, 0)
mesh = SubResource("BoxMesh_gh0ne")
skeleton = NodePath("../..")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="mesh"]
transform = Transform3D(-4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, 0, 1, 0.489391, 0.0169232, 0)
mesh = SubResource("BoxMesh_gh0ne")
skeleton = NodePath("../..")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="mesh"]
transform = Transform3D(1.91069e-15, -4.37114e-08, 1, -1, -4.37114e-08, 0, 4.37114e-08, -1, -4.37114e-08, 0.00120177, 0.0169232, 0.488189)
mesh = SubResource("BoxMesh_gh0ne")
skeleton = NodePath("../..")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="mesh"]
transform = Transform3D(1.91069e-15, -4.37114e-08, 1, -1, -4.37114e-08, 0, 4.37114e-08, -1, -4.37114e-08, 0.00120173, 0.0169232, -0.488189)
mesh = SubResource("BoxMesh_gh0ne")
skeleton = NodePath("../..")

[node name="item_detector" type="Area3D" parent="."]
input_ray_pickable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="item_detector"]
shape = SubResource("BoxShape3D_642he")

[connection signal="input_event" from="head/Body3D" to="." method="_on_animatable_body_3d_input_event"]
[connection signal="body_entered" from="item_detector" to="." method="_on_item_detector_body_entered"]
[connection signal="body_exited" from="item_detector" to="." method="_on_item_detector_body_exited"]
